{"ast":null,"code":"import _asyncToGenerator from \"C:/Angular/Full Stack template Tzomet sfarim with angular/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/data.service\";\nimport * as i2 from \"src/app/services/notify.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../book-card/book-card.component\";\nfunction ListComponent_app_book_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"app-book-card\", 3);\n    i0.…µ…µlistener(\"deleteMe\", function ListComponent_app_book_card_7_Template_app_book_card_deleteMe_0_listener($event) {\n      i0.…µ…µrestoreView(_r3);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.deleteThisBook($event));\n    });\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const b_r1 = ctx.$implicit;\n    i0.…µ…µproperty(\"book\", b_r1);\n  }\n}\nexport class ListComponent {\n  constructor(dataService, notifyService) {\n    this.dataService = dataService;\n    this.notifyService = notifyService;\n  }\n  search() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.books = yield _this.dataService.getBooksBySearchText(_this.searchText);\n        console.log(_this.books);\n      } catch (err) {\n        _this.notifyService.error(err);\n      }\n    })();\n  }\n  deleteThisBook(bookId) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.dataService.deleteBook(bookId);\n        _this2.notifyService.success(\"Book deleted\");\n        _this2.books.splice();\n      } catch (err) {\n        _this2.notifyService.error(err);\n      }\n    })();\n  }\n}\nListComponent.…µfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.…µ…µdirectiveInject(i1.DataService), i0.…µ…µdirectiveInject(i2.NotifyService));\n};\nListComponent.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 8,\n  vars: 2,\n  consts: [[\"type\", \"search\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [3, \"book\", \"deleteMe\", 4, \"ngFor\", \"ngForOf\"], [3, \"book\", \"deleteMe\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.…µ…µelementStart(0, \"div\")(1, \"label\");\n      i0.…µ…µtext(2, \"Enter text to search:\");\n      i0.…µ…µelementEnd();\n      i0.…µ…µelementStart(3, \"input\", 0);\n      i0.…µ…µlistener(\"ngModelChange\", function ListComponent_Template_input_ngModelChange_3_listener($event) {\n        return ctx.searchText = $event;\n      });\n      i0.…µ…µelementEnd();\n      i0.…µ…µelementStart(4, \"button\", 1);\n      i0.…µ…µlistener(\"click\", function ListComponent_Template_button_click_4_listener() {\n        return ctx.search();\n      });\n      i0.…µ…µtext(5, \"\\uD83D\\uDD0D\");\n      i0.…µ…µelementEnd();\n      i0.…µ…µelement(6, \"hr\");\n      i0.…µ…µtemplate(7, ListComponent_app_book_card_7_Template, 1, 1, \"app-book-card\", 2);\n      i0.…µ…µelementEnd();\n    }\n    if (rf & 2) {\n      i0.…µ…µadvance(3);\n      i0.…µ…µproperty(\"ngModel\", ctx.searchText);\n      i0.…µ…µadvance(4);\n      i0.…µ…µproperty(\"ngForOf\", ctx.books);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.BookCardComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAQAA,wCAAsF;IAApCA;MAAAA;MAAA;MAAA,OAAYA,4CAAsB;IAAA,EAAC;IAACA,iBAAgB;;;;IAA/DA,2BAAU;;;ACEjD,OAAM,MAAOC,aAAa;EAKtBC,YAA2BC,WAAwB,EAAUC,aAA4B;IAA9D,gBAAW,GAAXD,WAAW;IAAuB,kBAAa,GAAbC,aAAa;EAAmB;EAEhFC,MAAM;IAAA;IAAA;MACf,IAAI;QACA,KAAI,CAACC,KAAK,SAAS,KAAI,CAACH,WAAW,CAACI,oBAAoB,CAAC,KAAI,CAACC,UAAU,CAAC;QACzEC,OAAO,CAACC,GAAG,CAAC,KAAI,CAACJ,KAAK,CAAC;OAC1B,CACD,OAAMK,GAAQ,EAAE;QACZ,KAAI,CAACP,aAAa,CAACQ,KAAK,CAACD,GAAG,CAAC;;IAChC;EACL;EACaE,cAAc,CAACC,MAAc;IAAA;IAAA;MAEtC,IAAI;QACA,MAAM,MAAI,CAACX,WAAW,CAACY,UAAU,CAACD,MAAM,CAAC;QACzC,MAAI,CAACV,aAAa,CAACY,OAAO,CAAC,cAAc,CAAC;QAC1C,MAAI,CAACV,KAAK,CAACW,MAAM,EAAE;OAEtB,CACD,OAAMN,GAAQ,EAAE;QACZ,MAAI,CAACP,aAAa,CAACQ,KAAK,CAACD,GAAG,CAAC;;IAChC;EAIL;;AA9BSV,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDV1BtB,2BAAK;MAEEA,qCAAqB;MAAAA,iBAAQ;MACpCA,gCAAmD;MAA5BA;QAAA;MAAA,EAA0B;MAAjDA,iBAAmD;MAEnDA,iCAA2B;MAAnBA;QAAA,OAASuB,YAAQ;MAAA,EAAC;MAACvB,4BAAE;MAAAA,iBAAS;MACtCA,qBAAI;MAEJA,kFAAsG;MAItGA,iBAAM;;;MATiBA,eAA0B;MAA1BA,wCAA0B;MAKpBA,eAAQ;MAARA,mCAAQ","names":["i0","ListComponent","constructor","dataService","notifyService","search","books","getBooksBySearchText","searchText","console","log","err","error","deleteThisBook","bookId","deleteBook","success","splice","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Angular\\Full Stack template Tzomet sfarim with angular\\Frontend\\src\\app\\components\\data-area\\list\\list.component.html","C:\\Angular\\Full Stack template Tzomet sfarim with angular\\Frontend\\src\\app\\components\\data-area\\list\\list.component.ts"],"sourcesContent":["<div>\n\n<label>Enter text to search:</label>\n<input type = \"search\" [(ngModel)] = \"searchText\" >\n\n<button (click)=\"search()\">üîç</button>\n<hr>\n\n<app-book-card *ngFor=\"let b of books\" [book]=\"b\" (deleteMe)=\"deleteThisBook($event)\"></app-book-card>\n\n\n\n</div>\n","import { Component } from '@angular/core';\nimport BookModel from 'src/app/models/book-model';\nimport { DataService } from 'src/app/services/data.service';\nimport { NotifyService } from 'src/app/services/notify.service';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css']\n})\nexport class ListComponent {\n\n    public searchText: string;\n    public books: BookModel[];\n\n    public constructor(private dataService: DataService, private notifyService: NotifyService) { }\n\n    public async search() {\n        try {\n            this.books = await this.dataService.getBooksBySearchText(this.searchText);\n            console.log(this.books);\n        }\n        catch(err: any) {\n            this.notifyService.error(err);\n        }\n    }\n    public async deleteThisBook(bookId: number) {\n\n        try {\n            await this.dataService.deleteBook(bookId);\n            this.notifyService.success(\"Book deleted\");\n            this.books.splice()\n\n        }\n        catch(err: any) {\n            this.notifyService.error(err);\n        }\n\n\n        \n    }\n    \n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}